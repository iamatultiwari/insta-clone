{"ast":null,"code":"var _jsxFileName = \"C:\\\\insta\\\\demo\\\\MERN-Instagram-clone-main\\\\client\\\\src\\\\components\\\\screens\\\\ProfilePic.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport \"../styles/ProfilePic.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet base_uri = process.env.REACT_APP_BASE_URL;\nexport default function ProfilePic({\n  changeProfile\n}) {\n  _s();\n  const hiddenFileInput = useRef(null);\n  const [image, setImage] = useState(\"\");\n  const [url, setUrl] = useState(\"\");\n\n  //posting image to cloudinary\n  const postDetails = () => {\n    const data = new FormData();\n    data.append(\"file\", image);\n    data.append(\"upload_preset\", \"instagram\");\n    data.append(\"cloud_name\", \"vishalranjan\");\n    fetch(\"https://api.cloudinary.com/v1_1/vishalranjan/image/upload\", {\n      method: \"post\",\n      body: data\n    }).then(res => res.json()).then(data => setUrl(data.url)).catch(err => console.log(err));\n  };\n  const postPic = () => {\n    //saving post to mongodb\n    fetch(`${base_uri}/uploadProfilePic`, {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        pic: url\n      })\n    }).then(res => res.json()).then(data => {\n      changeProfile();\n      window.location.reload();\n    }).catch(err => console.log(err));\n  };\n  const handleClick = () => {\n    hiddenFileInput.current.click();\n  };\n  useEffect(() => {\n    if (image) {\n      postDetails();\n    }\n  }, [image]);\n  useEffect(() => {\n    if (url) {\n      postPic();\n    }\n  }, [url]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profilePic darkBg\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"changePic centered\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Change Profile Photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          borderTop: \"1px solid #00000030\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"upload-btn\",\n          style: {\n            color: \"#1EA1F7\"\n          },\n          onClick: handleClick,\n          children: \"Upload Photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: hiddenFileInput,\n          accept: \"image/*\",\n          style: {\n            display: \"none\"\n          },\n          onChange: e => {\n            setImage(e.target.files[0]);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          borderTop: \"1px solid #00000030\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"upload-btn\",\n          style: {\n            color: \"#ED4956 \"\n          },\n          onClick: () => {\n            setUrl(null);\n            postPic();\n          },\n          children: \"Remove Current Photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          borderTop: \"1px solid #00000030\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            background: \"none\",\n            border: \"none\",\n            cursor: \"pointer\",\n            fontSize: \"15px\"\n          },\n          onClick: changeProfile,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(ProfilePic, \"Gg9gOSOOmhyV/ZBsHfTTi77C+EM=\");\n_c = ProfilePic;\nvar _c;\n$RefreshReg$(_c, \"ProfilePic\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","base_uri","process","env","REACT_APP_BASE_URL","ProfilePic","changeProfile","_s","hiddenFileInput","image","setImage","url","setUrl","postDetails","data","FormData","append","fetch","method","body","then","res","json","catch","err","console","log","postPic","headers","localStorage","getItem","JSON","stringify","pic","window","location","reload","handleClick","current","click","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","borderTop","color","onClick","type","ref","accept","display","onChange","e","target","files","background","border","cursor","fontSize","_c","$RefreshReg$"],"sources":["C:/insta/demo/MERN-Instagram-clone-main/client/src/components/screens/ProfilePic.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport \"../styles/ProfilePic.css\"\nlet base_uri = process.env.REACT_APP_BASE_URL\n\nexport default function ProfilePic({changeProfile}) {\n\n    const hiddenFileInput = useRef(null)\n    const [image, setImage] = useState(\"\")\n    const [url, setUrl] = useState(\"\")\n\n     //posting image to cloudinary\n     const postDetails =()=>{\n        const data = new FormData()\n        data.append(\"file\", image)\n        data.append(\"upload_preset\", \"instagram\")\n        data.append(\"cloud_name\", \"vishalranjan\")\n\n        fetch(\"https://api.cloudinary.com/v1_1/vishalranjan/image/upload\", {\n            method: \"post\",\n            body: data\n        }).then(res => res.json())\n        .then(data => setUrl(data.url))\n        .catch(err => console.log(err))\n    }\n\n    const postPic =()=>{\n        //saving post to mongodb\n        fetch(`${base_uri}/uploadProfilePic`, {\n            method: \"put\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": \"Bearer \"+ localStorage.getItem(\"jwt\")\n            },\n            body: JSON.stringify({\n                pic: url\n            })\n        }).then(res => res.json())\n        .then(data => {\n            changeProfile();\n            window.location.reload()\n        })\n        .catch(err => console.log(err))\n    }\n\n    const handleClick =()=>{\n        hiddenFileInput.current.click()\n    }\n\n    useEffect(()=>{\n        if(image){\n            postDetails();\n        }\n    }, [image])\n\n    useEffect(()=>{\n        if(url){\n            postPic()\n        }\n    }, [url])\n\n  return (\n    <div className=\"profilePic darkBg\">\n        <div className=\"changePic centered\">\n            <div>\n                <h2>Change Profile Photo</h2>\n            </div>\n            <div style={{borderTop: \"1px solid #00000030\"}}>\n                <button className=\"upload-btn\" style={{color: \"#1EA1F7\"}} onClick={handleClick} >Upload Photo</button>\n                <input type=\"file\" ref={hiddenFileInput} accept='image/*' style={{display: \"none\"}} onChange={(e)=>{setImage(e.target.files[0])}} />\n            </div>\n            <div style={{borderTop: \"1px solid #00000030\"}}>\n                <button className=\"upload-btn\" style={{color: \"#ED4956 \"}} onClick={()=>{\n                    setUrl(null)\n                    postPic()\n                }} >\n                    Remove Current Photo\n                </button>\n            </div>  \n            <div style={{borderTop: \"1px solid #00000030\"}} >\n                <button style={{background:\"none\", border: \"none\", cursor:\"pointer\", fontSize: \"15px\"}} onClick={changeProfile} >Cancel</button>\n            </div>\n        </div>\n    </div>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}