{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import'../styles/SignIn.css';import logo from'../../images/insta_logo.png';import phoneImg from'../../images/insta_bg_img.png';import{Link,useNavigate}from'react-router-dom';import{LoginContext}from'../../context/LoginState';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";let base_uri=process.env.REACT_APP_BASE_URL;export default function SignIn(){useEffect(()=>{const token=localStorage.getItem(\"jwt\");if(token){navigate('/');}});const{setUserLogin}=useContext(LoginContext);const navigate=useNavigate();const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");//toast function\nconst notifyA=data=>toast.success(data);const notifyB=data=>toast.error(data);const emailRegex=/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;const postUser=()=>{//checking email\nif(!emailRegex.test(email)){notifyB(\"Invalid Email\");return;}fetch(\"\".concat(base_uri,\"/signin\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(response=>response.json()).then(data=>{if(data.error){notifyB(data.error);}else{notifyA(data.message);localStorage.setItem(\"jwt\",data.token);localStorage.setItem(\"user\",JSON.stringify(data.user));setUserLogin(true);navigate('/');}}).catch(error=>{console.log('Error :',error);});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"box2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"phone-img-div\",children:/*#__PURE__*/_jsx(\"img\",{className:\"phone-img\",src:phoneImg,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"signIn-parent\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"signIn-box\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"logo-img\",src:logo,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-container2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-div-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"input-fields\",name:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-div-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"input-fields\",name:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{className:\"button-div\",children:/*#__PURE__*/_jsx(\"button\",{class:\"button-65\",role:\"button\",onClick:()=>{postUser();},children:\"Log in\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"have-acc-2\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"have-acc-text-2\",children:[\"Don't have an account ?\",/*#__PURE__*/_jsxs(Link,{className:\"link\",to:'/signup',children:[\" \",/*#__PURE__*/_jsx(\"span\",{className:\"log-in\",children:\"Sign up\"}),\" \"]}),\" \"]})})]})]})});}","map":{"version":3,"names":["React","useContext","useEffect","useState","logo","phoneImg","Link","useNavigate","LoginContext","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","base_uri","process","env","REACT_APP_BASE_URL","SignIn","token","localStorage","getItem","navigate","setUserLogin","email","setEmail","password","setPassword","notifyA","data","success","notifyB","error","emailRegex","postUser","test","fetch","concat","method","headers","body","JSON","stringify","then","response","json","message","setItem","user","catch","console","log","children","className","src","alt","type","name","placeholder","value","onChange","e","target","class","role","onClick","to"],"sources":["C:/insta/demo/MERN-Instagram-clone-main/client/src/components/screens/SignIn.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport '../styles/SignIn.css'\nimport logo from  '../../images/insta_logo.png'\nimport phoneImg from '../../images/insta_bg_img.png'\nimport { Link, useNavigate } from 'react-router-dom'\nimport { LoginContext } from '../../context/LoginState'\nimport { toast } from 'react-toastify'\nlet base_uri = process.env.REACT_APP_BASE_URL\n\nexport default function SignIn() {\n\n    useEffect(()=>{\n        const token = localStorage.getItem(\"jwt\")\n        if(token){\n            navigate('/')\n        }\n    })\n\n    const {setUserLogin} = useContext(LoginContext)\n\n    const navigate = useNavigate()\n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n\n    //toast function\n    const notifyA = (data) => toast.success(data)\n    const notifyB = (data) => toast.error(data)\n\n    const emailRegex = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/\n\n    const postUser =()=>{\n\n        //checking email\n        if(!emailRegex.test(email)){\n            notifyB(\"Invalid Email\");\n            return\n        }\n\n        fetch(`${base_uri}/signin`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                email:email,\n                password: password\n            })\n        }).then(response => response.json())\n          .then(data => {\n            if(data.error){\n                notifyB(data.error)\n            }else{\n                notifyA(data.message)\n                localStorage.setItem(\"jwt\", data.token)\n                localStorage.setItem(\"user\", JSON.stringify(data.user))\n                setUserLogin(true)\n                navigate('/')\n            }\n          })\n          .catch((error) => {\n            console.log('Error :', error);\n          });\n\n    }\n\n  return (\n    <>\n    <div className=\"box2\">\n        <div className=\"phone-img-div\">\n            <img className='phone-img' src={phoneImg} alt=\"\" />\n        </div>\n        <div className=\"signIn-parent\">\n        <div className=\"signIn-box\">\n                <img className='logo-img' src={logo} alt=\"\" />\n            <div className=\"form-container2\">\n                <div className='input-div-2' >\n                <input type=\"email\" className='input-fields' name='email' placeholder='Email' value={email} onChange={(e)=> setEmail(e.target.value)}  />\n                </div>\n                <div className='input-div-2' >\n                <input type=\"password\" className='input-fields' name='password' placeholder='Password' value={password} onChange={(e)=> setPassword(e.target.value)}  />\n                </div>\n                <div className='button-div'>\n                    <button class=\"button-65\" role=\"button\" onClick={()=> {postUser()}} >Log in</button>\n                </div>\n            </div>\n            \n        </div>\n        <div className=\"have-acc-2\">\n            <p className='have-acc-text-2'>Don't have an account ?<Link className='link' to={'/signup'}> <span className='log-in'>Sign up</span> </Link> </p>\n        </div>\n        </div>\n        \n    </div>\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}