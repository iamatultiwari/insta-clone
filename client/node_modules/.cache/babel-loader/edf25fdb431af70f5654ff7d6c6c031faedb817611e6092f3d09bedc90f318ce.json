{"ast":null,"code":"import React,{useEffect,useState}from'react';import PostDetail from'./PostDetail';import ProfilePic from'./ProfilePic';import\"../styles/Profile.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";let base_uri=process.env.REACT_APP_BASE_URL;export default function Profile(){var picLink=\"https://cdn-icons-png.flaticon.com/512/3177/3177440.png\";const[show,setShow]=useState(false);const[posts,setPosts]=useState([]);const[pic,setPic]=useState([]);const[user,setUser]=useState(\"\");const[changePic,setChangePic]=useState(false);const toggleDetails=posts=>{if(show){setShow(false);}else{setShow(true);setPosts(posts);}};const changeProfile=()=>{if(changePic){setChangePic(false);}else{setChangePic(true);}};useEffect(()=>{fetch(\"\".concat(base_uri,\"/user/\").concat(JSON.parse(localStorage.getItem(\"user\"))._id),{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(res=>res.json()).then(result=>{setPic(result.post);setUser(result.user);});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{onClick:()=>{changeProfile();},src:user.Photo?user.Photo:picLink,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsx(\"h1\",{children:JSON.parse(localStorage.getItem(\"user\")).name}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[pic?pic.length:\"0\",\" post\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:pic.map(pics=>{return/*#__PURE__*/_jsx(\"img\",{className:\"item\",src:pics.photo,onClick:()=>{toggleDetails(pics);}},pics._id);})}),show&&/*#__PURE__*/_jsx(PostDetail,{item:posts,user:user,toggleDetails:toggleDetails}),changePic&&/*#__PURE__*/_jsx(ProfilePic,{changeProfile:changeProfile})]});}","map":{"version":3,"names":["React","useEffect","useState","PostDetail","ProfilePic","jsx","_jsx","jsxs","_jsxs","base_uri","process","env","REACT_APP_BASE_URL","Profile","picLink","show","setShow","posts","setPosts","pic","setPic","user","setUser","changePic","setChangePic","toggleDetails","changeProfile","fetch","concat","JSON","parse","localStorage","getItem","_id","headers","then","res","json","result","post","className","children","onClick","src","Photo","alt","name","style","display","length","followers","following","width","opacity","margin","map","pics","photo","item"],"sources":["C:/insta/demo/MERN-Instagram-clone-main/client/src/components/screens/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport PostDetail from './PostDetail'\nimport ProfilePic from './ProfilePic'\nimport \"../styles/Profile.css\"\nlet base_uri = process.env.REACT_APP_BASE_URL\n\nexport default function Profile() {\n\n    var picLink = \"https://cdn-icons-png.flaticon.com/512/3177/3177440.png\"\n    const [show, setShow] = useState(false)\n    const [posts, setPosts] = useState([])\n    const [pic, setPic] = useState([])\n    const [user, setUser] = useState(\"\")\n    const [changePic, setChangePic] = useState(false)\n\n    \n    const toggleDetails =(posts)=>{\n        if(show){\n            setShow(false)\n        }else{\n            setShow(true)\n            setPosts(posts)\n        }\n    }\n\n    const changeProfile =()=>{\n        if(changePic){\n            setChangePic(false)\n        }else{\n            setChangePic(true)\n        }\n    }\n    \n    \n    useEffect(()=>{\n        fetch(`${base_uri}/user/${JSON.parse(localStorage.getItem(\"user\"))._id}`, {\n            headers: {\n                \"Authorization\": \"Bearer \"+ localStorage.getItem(\"jwt\")\n            }\n        }).then(res => res.json())\n        .then((result)=>{\n            setPic(result.post)\n            setUser(result.user)\n        })\n    },[])\n\n  return (\n    <div className=\"profile\">\n        {/* profile frame */}\n        <div className=\"profile-frame\">\n            <div className=\"profile-pic\">\n                <img onClick={()=> {changeProfile()}} src={user.Photo ? user.Photo : picLink } alt=\"\" />\n            </div>\n\n            {/* profile data */}\n            <div className=\"profile-data\">\n                <h1>{JSON.parse(localStorage.getItem(\"user\")).name}</h1>\n                <div className=\"profile-info\" style={{display: \"flex\"}} >\n                    <p>{pic ? pic.length : \"0\"} post</p>\n                    <p>{user.followers ? user.followers.length : \"0\"} followers</p>\n                    <p>{user.following ? user.following.length : \"0\"} following</p>\n                </div>\n            </div>\n        </div>\n\n        <hr style={{width: \"90%\", opacity: \"0.8\", margin: \"25px auto\"}} />\n\n        {/* Gallery */}\n        <div className=\"gallery\">\n            {pic.map((pics)=>{\n                return (\n                    <img className='item' key={pics._id} src={pics.photo}\n                    onClick={()=> {toggleDetails(pics)}}\n                    />\n                )\n            })}\n        </div>\n\n            {show && \n                <PostDetail item ={posts} user={user} toggleDetails={toggleDetails} />\n            }\n\n            {\n                changePic && <ProfilePic changeProfile={changeProfile} />\n            }\n\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}