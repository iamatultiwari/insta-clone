{"ast":null,"code":"import React,{useEffect,useState}from'react';import\"../styles/Profile.css\";import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";let base_uri=process.env.REACT_APP_BASE_URL;export default function UserProfile(){var picLink=\"https://cdn-icons-png.flaticon.com/512/3177/3177440.png\";const{userid}=useParams();const[isFollow,setIsFollow]=useState(false);const[user,setUser]=useState(\"\");const[posts,setPosts]=useState([]);//to follow user\nconst followUser=userId=>{fetch(\"\".concat(base_uri,\"/follow\"),{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userId})}).then(res=>{res.json();}).then(data=>{setIsFollow(true);});};const unfollowUser=userId=>{fetch(\"\".concat(base_uri,\"/unfollow\"),{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userId})}).then(res=>{res.json();}).then(data=>{setIsFollow(false);});};useEffect(()=>{fetch(\"\".concat(base_uri,\"/user/\").concat(userid),{headers:{\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(res=>res.json()).then(result=>{setUser(result.user);setPosts(result.post);if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){setIsFollow(true);}});},[isFollow]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:user.Photo?user.Photo:picLink,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:user.name}),userid===JSON.parse(localStorage.getItem(\"user\"))._id?\"\":/*#__PURE__*/_jsx(\"button\",{className:\"followBtn\",onClick:()=>{if(isFollow){unfollowUser(user._id);}else{followUser(user._id);}},children:isFollow?\"Unfollow\":\"Follow\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[posts.length,\" post\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:posts.map(pics=>{return/*#__PURE__*/_jsx(\"img\",{className:\"item\",src:pics.photo,alt:\"\"},pics._id);})})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","jsx","_jsx","jsxs","_jsxs","base_uri","process","env","REACT_APP_BASE_URL","UserProfile","picLink","userid","isFollow","setIsFollow","user","setUser","posts","setPosts","followUser","userId","fetch","concat","method","headers","localStorage","getItem","body","JSON","stringify","followId","then","res","json","data","unfollowUser","result","post","followers","includes","parse","_id","className","children","src","Photo","alt","style","display","alignItems","justifyContent","name","onClick","length","following","width","opacity","margin","map","pics","photo"],"sources":["C:/insta/demo/MERN-Instagram-clone-main/client/src/components/screens/UserProfile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport \"../styles/Profile.css\"\nimport { useParams } from 'react-router-dom'\nlet base_uri = process.env.REACT_APP_BASE_URL\n\nexport default function UserProfile() {\n\n    var picLink = \"https://cdn-icons-png.flaticon.com/512/3177/3177440.png\"\n    const { userid } = useParams()\n    const [isFollow, setIsFollow] = useState(false)\n    const [user, setUser] = useState(\"\")\n    const [posts, setPosts] = useState([])\n\n    //to follow user\n\n    const followUser = (userId)=>{\n        fetch(`${base_uri}/follow`, {\n            method: \"put\", \n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": \"Bearer \"+ localStorage.getItem(\"jwt\")\n            },\n            body: JSON.stringify({\n                followId: userId\n            })\n        })\n        .then((res)=> { res.json()})\n        .then((data)=>{\n            setIsFollow(true)\n        })\n    }\n\n    const unfollowUser = (userId)=>{\n        fetch(`${base_uri}/unfollow`, {\n            method: \"put\", \n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": \"Bearer \"+ localStorage.getItem(\"jwt\")\n            },\n            body: JSON.stringify({\n                followId: userId\n            })\n        })\n        .then((res)=> { res.json()})\n        .then((data)=>{\n            setIsFollow(false)\n        })\n    }\n\n    useEffect(()=>{\n        fetch(`${base_uri}/user/${userid}`, {\n            headers: {\n                \"Authorization\": \"Bearer \"+localStorage.getItem(\"jwt\")\n            }\n        }).then(res => res.json())\n        .then((result)=> {\n            setUser(result.user)\n            setPosts(result.post)\n            if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){\n                setIsFollow(true)\n            }\n        })\n    }, [isFollow])\n\n  return (\n    <div className=\"profile\">\n        {/* profile frame */}\n        <div className=\"profile-frame\">\n            <div className=\"profile-pic\">\n                <img src={user.Photo ? user.Photo : picLink } alt=\"\" />\n            </div>\n\n            {/* profile data */}\n            <div className=\"profile-data\">\n\n                <div style={{display:\"flex\", alignItems:\"center\", justifyContent:\"space-between\"}} >\n                    <h1>{user.name}</h1>\n\n                    {/* logic to show to the follow btn to all the users except the logged user */}\n\n                    {\n                        userid === JSON.parse(localStorage.getItem(\"user\"))._id\n                        ?\n                        \"\"\n                        :\n                        <button className=\"followBtn\" \n                            onClick={()=>{\n                                if(isFollow){\n                                    unfollowUser(user._id)\n                                }else{\n                                    followUser(user._id)\n                                }\n                            }}\n                        >\n                            {isFollow ? \"Unfollow\" : \"Follow\"}\n                        </button>\n                    }\n\n                </div>\n\n\n                <div className=\"profile-info\" style={{display: \"flex\"}} >\n                    <p>{posts.length} post</p>\n                    <p>{user.followers ? user.followers.length : \"0\"} followers</p>\n                    <p>{user.following ? user.following.length : \"0\"} following</p>\n                </div>\n            </div>\n        </div>\n\n        <hr style={{width: \"90%\", opacity: \"0.8\", margin: \"25px auto\"}} />\n\n        {/* Gallery */}\n        <div className=\"gallery\">\n            {posts.map((pics)=>{\n                return (\n                    <img className='item' key={pics._id} src={pics.photo} alt=''\n                    />\n                )\n            })}\n        </div>\n\n\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}